<!DOCTYPE html>
<html lang="en-us">

<head><title>
    DbContext | 
    
    My New Hugo Site</title>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="description" content="A description for the meta tag of the site
    ">


<meta property="og:title" content="DbContext" />
<meta property="og:description" content="A description for the meta tag of the site" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://example.org/tags/dbcontext/" />
<meta property="og:updated_time" content="2014-12-18T16:17:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="DbContext"/>
<meta name="twitter:description" content="A description for the meta tag of the site"/>

<meta itemprop="name" content="DbContext">
<meta itemprop="description" content="A description for the meta tag of the site">

<link rel="canonical" href="http://example.org/tags/dbcontext/" />

<link rel="icon" type="image/png" href="http://example.org/image/favicon.ico">

<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/bulma.min.css">





<script src=/js/ramium.js></script>
<link rel="stylesheet" href=/css/ramium.css>






<script data-ad-client="ca-pub-5338947003335320" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>

<body><nav class="navbar is-dark" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href=/>
      
      <strong>My New Hugo Site </strong>
      
    </a>

    <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false"
      data-target="navbarBasicExample">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div id="navbarBasicExample" class="navbar-menu">
    <div class="navbar-start">
      
      
      <a class="navbar-item" href="/">Home</a>
      
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">This Blog</a>
        <div class="navbar-dropdown">
          
          <a class="navbar-item" href="/tags/">All Tags</a>
          
          <a class="navbar-item" href="/sections/">All Sections</a>
          
          <a class="navbar-item" href="/posts/">All Posts</a>
          
        </div>
      </div>
      
      
    </div>

    <div class="navbar-end">
      
      <a class="navbar-item navgithub" href="https://github.com/rafed/ramium/" target="_blank">
        <i class="fa fa-github fa-2x"></i>
      </a>
      

      
    </div>
  </div>
</nav><div class="columns is-centered">
        <div id="page-body" class="column is-7">

<div class="content">
    <h1>DbContext</h1>
</div>

<div class="blog-brief">
    <a href="/posts/2014/12/entity-framework-dbcontext-sqlqueryexecutesqlcommand/">
        <h3 class="title is-4">
            Entity Framework DbContext SqlQuery、ExecuteSqlCommand
        </h3>
    </a>

    <div class="level is-mobile details">
        <div class="level-left">

            
            <div class="level-item">
                <a href="/posts/2014/12/entity-framework-dbcontext-sqlqueryexecutesqlcommand/">
                    <p class="subtitle info date">Dec 18, 2014
                    </p>
                </a>
            </div>
            


            <div class="level-item">
                <a href="/posts/2014/12/entity-framework-dbcontext-sqlqueryexecutesqlcommand/">
                    <p class="subtitle info">
                        1 min read
                    </p>
                </a>
            </div>
        </div>
        <div class="level-right is-hidden-touch">
            
            <a class="tag is-rounded" href="/tags/dbcontext">DbContext</a>
            
            <a class="tag is-rounded" href="/tags/entity-framework">Entity Framework</a>
            
        </div>
    </div>

    <div>
        

        <div>
            <a href="/posts/2014/12/entity-framework-dbcontext-sqlqueryexecutesqlcommand/">
                <p class="summary">
                    SqlQuery會回傳結果集，ExecuteSqlCommand會回傳受影響的筆數 傳遞參數的方式有以下幾種
namespace ConsoleApplication1 { using ConsoleApplication1.Models; using System.Data; using System.Data.Entity; using System.Data.SqlClient; class Program { static void Main(string[] args) { Database.SetInitializer(new DropCreateDatabaseAlways&amp;lt;DemoContext&amp;gt;()); using (DemoContext db = new DemoContext()) { db.Database.Initialize(false); int colA = 123; string colB = &#34;abc&#34;; // 使用佔位符號 db.Database.SqlQuery&amp;lt;TableName&amp;gt;(&#34;SELECT * FROM TableName WHERE ColA={0} AND ColB={1}&#34;, colA, colB); // 使用固定名稱的參數 db.Database.SqlQuery&amp;lt;TableName&amp;gt;(&#34;SELECT * FROM TableName WHERE ColA=@P0 AND ColB=@P1&#34;, colA, colB); // 使用SQL參數 db.Database.SqlQuery&amp;lt;TableName&amp;gt;( &#34;SELECT * FROM TableName WHERE ColA=@ColA AND ColB=@ColB&#34;, new SqlParameter(&#34;ColA&#34;, colA), new SqlParameter(&#34;ColB&#34;, colB)); // 使用SQL參數並明確指定資料形態 db.
                    
                </p>
            </a>
        </div>
    </div>

    <div class="level is-mobile continue-reading">
        <div class="level-left">
        </div>
        <div class="level-right">
            <a href="/posts/2014/12/entity-framework-dbcontext-sqlqueryexecutesqlcommand/">Continue reading <i class="fa fa-angle-double-right"
                    aria-hidden="true"></i></a>
        </div>
    </div>
    <hr>
</div><div class="blog-brief">
    <a href="/posts/2014/12/entity-framework-dbcontext-validation-api/">
        <h3 class="title is-4">
            Entity Framework DbContext Validation API
        </h3>
    </a>

    <div class="level is-mobile details">
        <div class="level-left">

            
            <div class="level-item">
                <a href="/posts/2014/12/entity-framework-dbcontext-validation-api/">
                    <p class="subtitle info date">Dec 18, 2014
                    </p>
                </a>
            </div>
            


            <div class="level-item">
                <a href="/posts/2014/12/entity-framework-dbcontext-validation-api/">
                    <p class="subtitle info">
                        6 mins read
                    </p>
                </a>
            </div>
        </div>
        <div class="level-right is-hidden-touch">
            
            <a class="tag is-rounded" href="/tags/dbcontext">DbContext</a>
            
            <a class="tag is-rounded" href="/tags/entity-framework">Entity Framework</a>
            
        </div>
    </div>

    <div>
        

        <div>
            <a href="/posts/2014/12/entity-framework-dbcontext-validation-api/">
                <p class="summary">
                    先建一張資料表，並加上幾個Attribute當例子
namespace ConsoleApplication1.Models { using System; using System.ComponentModel.DataAnnotations; using System.ComponentModel.DataAnnotations.Schema; [Table(&#34;Table1&#34;)] public class Table1 { [Key] public int Table1Id { get; set; } [Required] [StringLength(10, MinimumLength = 2)] public string C1 { get; set; } [Range(10, 20)] public int C2 { get; set; } public DateTime D1 { get; set; } public DateTime D2 { get; set; } }  }  針對屬性驗證
namespace ConsoleApplication1 { using ConsoleApplication1.Models; using System; using System.
                    
                </p>
            </a>
        </div>
    </div>

    <div class="level is-mobile continue-reading">
        <div class="level-left">
        </div>
        <div class="level-right">
            <a href="/posts/2014/12/entity-framework-dbcontext-validation-api/">Continue reading <i class="fa fa-angle-double-right"
                    aria-hidden="true"></i></a>
        </div>
    </div>
    <hr>
</div><div class="blog-brief">
    <a href="/posts/2014/12/entity-framework-dbcontext-change-tracker-api/">
        <h3 class="title is-4">
            Entity Framework DbContext Change Tracker API
        </h3>
    </a>

    <div class="level is-mobile details">
        <div class="level-left">

            
            <div class="level-item">
                <a href="/posts/2014/12/entity-framework-dbcontext-change-tracker-api/">
                    <p class="subtitle info date">Dec 17, 2014
                    </p>
                </a>
            </div>
            


            <div class="level-item">
                <a href="/posts/2014/12/entity-framework-dbcontext-change-tracker-api/">
                    <p class="subtitle info">
                        5 mins read
                    </p>
                </a>
            </div>
        </div>
        <div class="level-right is-hidden-touch">
            
            <a class="tag is-rounded" href="/tags/dbcontext">DbContext</a>
            
            <a class="tag is-rounded" href="/tags/entity-framework">Entity Framework</a>
            
        </div>
    </div>

    <div>
        

        <div>
            <a href="/posts/2014/12/entity-framework-dbcontext-change-tracker-api/">
                <p class="summary">
                    DbSet有一個Local，是用來存放從資料庫中取得的資料
namespace ConsoleApplication1 { using ConsoleApplication1.Models; using System; using System.Data.Entity; class Program { static void Main(string[] args) { // 初始化資料庫 Database.SetInitializer(new MyInit()); using (DemoContext db = new DemoContext()) { db.Database.Initialize(false); Console.WriteLine(db.Topic.Local.Count); db.Topic.Load(); Console.WriteLine(db.Topic.Local.Count); } } }  } 
[![](http://2.bp.blogspot.com/-nFIf_sip55A/VJFaB_gYo0I/AAAAAAAABzs/FxfhAybwr8Q/s1600/01.png)](http://2.bp.blogspot.com/-nFIf_sip55A/VJFaB_gYo0I/AAAAAAAABzs/FxfhAybwr8Q/s1600/01.png) Local屬性是一個ObservableCollection，可以透過CollectionChanged事件來得到Local集合中發生變化的通知 namespace ConsoleApplication1 { using ConsoleApplication1.Models; using System; using System.Data.Entity; class Program { static void Main(string[] args) { // 初始化資料庫 Database.SetInitializer(new MyInit()); using (DemoContext db = new DemoContext()) { db.Database.Initialize(false); db.
                    
                </p>
            </a>
        </div>
    </div>

    <div class="level is-mobile continue-reading">
        <div class="level-left">
        </div>
        <div class="level-right">
            <a href="/posts/2014/12/entity-framework-dbcontext-change-tracker-api/">Continue reading <i class="fa fa-angle-double-right"
                    aria-hidden="true"></i></a>
        </div>
    </div>
    <hr>
</div><div class="blog-brief">
    <a href="/posts/2014/12/entity-framework-dbcontext-%E5%BB%B6%E9%81%B2%E5%8A%A0%E8%BC%89%E8%B2%AA%E5%A9%AA%E5%8A%A0%E8%BC%89%E9%A1%AF%E6%80%A7%E5%8A%A0%E8%BC%89/">
        <h3 class="title is-4">
            Entity Framework DbContext 延遲加載、貪婪加載、顯性加載
        </h3>
    </a>

    <div class="level is-mobile details">
        <div class="level-left">

            
            <div class="level-item">
                <a href="/posts/2014/12/entity-framework-dbcontext-%E5%BB%B6%E9%81%B2%E5%8A%A0%E8%BC%89%E8%B2%AA%E5%A9%AA%E5%8A%A0%E8%BC%89%E9%A1%AF%E6%80%A7%E5%8A%A0%E8%BC%89/">
                    <p class="subtitle info date">Dec 17, 2014
                    </p>
                </a>
            </div>
            


            <div class="level-item">
                <a href="/posts/2014/12/entity-framework-dbcontext-%E5%BB%B6%E9%81%B2%E5%8A%A0%E8%BC%89%E8%B2%AA%E5%A9%AA%E5%8A%A0%E8%BC%89%E9%A1%AF%E6%80%A7%E5%8A%A0%E8%BC%89/">
                    <p class="subtitle info">
                        7 mins read
                    </p>
                </a>
            </div>
        </div>
        <div class="level-right is-hidden-touch">
            
            <a class="tag is-rounded" href="/tags/dbcontext">DbContext</a>
            
            <a class="tag is-rounded" href="/tags/entity-framework">Entity Framework</a>
            
        </div>
    </div>

    <div>
        

        <div>
            <a href="/posts/2014/12/entity-framework-dbcontext-%E5%BB%B6%E9%81%B2%E5%8A%A0%E8%BC%89%E8%B2%AA%E5%A9%AA%E5%8A%A0%E8%BC%89%E9%A1%AF%E6%80%A7%E5%8A%A0%E8%BC%89/">
                <p class="summary">
                    用一個留言版的主表和明細表當例子，順便加入初始化資料來方便觀察資料載入方式的差異 DemoContext
namespace ConsoleApplication1.Models { using System.Data.Entity; public class DemoContext : DbContext { public DbSet&amp;lt;Topic&amp;gt; Topic { get; set; } public DbSet&amp;lt;Reply&amp;gt; Reply { get; set; } }  }  留言版主表
namespace ConsoleApplication1.Models { using System.Collections.Generic; using System.ComponentModel.DataAnnotations; using System.ComponentModel.DataAnnotations.Schema; [Table(&#34;Topic&#34;)] public class Topic { [Key] public int TopicId { get; set; } public string TopicTitle { get; set; } public virtual ICollection&amp;lt;Reply&amp;gt; Reply { get; set; } }  }
                    
                </p>
            </a>
        </div>
    </div>

    <div class="level is-mobile continue-reading">
        <div class="level-left">
        </div>
        <div class="level-right">
            <a href="/posts/2014/12/entity-framework-dbcontext-%E5%BB%B6%E9%81%B2%E5%8A%A0%E8%BC%89%E8%B2%AA%E5%A9%AA%E5%8A%A0%E8%BC%89%E9%A1%AF%E6%80%A7%E5%8A%A0%E8%BC%89/">Continue reading <i class="fa fa-angle-double-right"
                    aria-hidden="true"></i></a>
        </div>
    </div>
    <hr>
</div><div class="blog-brief">
    <a href="/posts/2014/12/entity-framework-dbcontext-%E6%96%B0%E5%A2%9E%E4%BF%AE%E6%94%B9%E5%88%AA%E9%99%A4%E6%9F%A5%E8%A9%A2/">
        <h3 class="title is-4">
            Entity Framework DbContext 新增、修改、刪除、查詢
        </h3>
    </a>

    <div class="level is-mobile details">
        <div class="level-left">

            
            <div class="level-item">
                <a href="/posts/2014/12/entity-framework-dbcontext-%E6%96%B0%E5%A2%9E%E4%BF%AE%E6%94%B9%E5%88%AA%E9%99%A4%E6%9F%A5%E8%A9%A2/">
                    <p class="subtitle info date">Dec 17, 2014
                    </p>
                </a>
            </div>
            


            <div class="level-item">
                <a href="/posts/2014/12/entity-framework-dbcontext-%E6%96%B0%E5%A2%9E%E4%BF%AE%E6%94%B9%E5%88%AA%E9%99%A4%E6%9F%A5%E8%A9%A2/">
                    <p class="subtitle info">
                        3 mins read
                    </p>
                </a>
            </div>
        </div>
        <div class="level-right is-hidden-touch">
            
            <a class="tag is-rounded" href="/tags/dbcontext">DbContext</a>
            
            <a class="tag is-rounded" href="/tags/entity-framework">Entity Framework</a>
            
        </div>
    </div>

    <div>
        

        <div>
            <a href="/posts/2014/12/entity-framework-dbcontext-%E6%96%B0%E5%A2%9E%E4%BF%AE%E6%94%B9%E5%88%AA%E9%99%A4%E6%9F%A5%E8%A9%A2/">
                <p class="summary">
                    首先建立一個留言版的資料庫來當例子
DemoContext
namespace ConsoleApplication1.Models { using System.Data.Entity; public class DemoContext : DbContext { public DbSet&amp;lt;Topic&amp;gt; Topic { get; set; } public DbSet&amp;lt;Reply&amp;gt; Reply { get; set; } }  }  留言版主表
namespace ConsoleApplication1.Models { using System.Collections.Generic; using System.ComponentModel.DataAnnotations; using System.ComponentModel.DataAnnotations.Schema; [Table(&#34;Topic&#34;)] public class Topic { [Key] public int TopicId { get; set; } public string TopicTitle { get; set; } public virtual ICollection&amp;lt;Reply&amp;gt; Reply { get; set; } }  }
                    
                </p>
            </a>
        </div>
    </div>

    <div class="level is-mobile continue-reading">
        <div class="level-left">
        </div>
        <div class="level-right">
            <a href="/posts/2014/12/entity-framework-dbcontext-%E6%96%B0%E5%A2%9E%E4%BF%AE%E6%94%B9%E5%88%AA%E9%99%A4%E6%9F%A5%E8%A9%A2/">Continue reading <i class="fa fa-angle-double-right"
                    aria-hidden="true"></i></a>
        </div>
    </div>
    <hr>
</div><div class="blog-brief">
    <a href="/posts/2014/10/entity-framework-%E7%AD%86%E8%A8%98/">
        <h3 class="title is-4">
            Entity Framework 筆記
        </h3>
    </a>

    <div class="level is-mobile details">
        <div class="level-left">

            
            <div class="level-item">
                <a href="/posts/2014/10/entity-framework-%E7%AD%86%E8%A8%98/">
                    <p class="subtitle info date">Oct 20, 2014
                    </p>
                </a>
            </div>
            


            <div class="level-item">
                <a href="/posts/2014/10/entity-framework-%E7%AD%86%E8%A8%98/">
                    <p class="subtitle info">
                        1 min read
                    </p>
                </a>
            </div>
        </div>
        <div class="level-right is-hidden-touch">
            
            <a class="tag is-rounded" href="/tags/code-first">Code First</a>
            
            <a class="tag is-rounded" href="/tags/dbcontext">DbContext</a>
            
            <a class="tag is-rounded" href="/tags/entity-framework">Entity Framework</a>
            
        </div>
    </div>

    <div>
        

        <div>
            <a href="/posts/2014/10/entity-framework-%E7%AD%86%E8%A8%98/">
                <p class="summary">
                    [Code First]
1. Entity Framework Code First 預設對應規則
2. Entity Framework Code First 對應規則設定
3. Entity Framework Code First 組織Fluent API 設定
4. Entity Framework Code First 資料庫初始化設定
5. Entity Framework Code First 一對一關聯設定
6. Entity Framework Code First 一對多關聯設定
7. Entity Framework Code First 多對多關聯設定
8. Entity Framework Code First Complex Type
9. Entity Framework Code First 繼承對應設定
[DbContext]
1. Entity Framework DbContext 新增、修改、刪除、查詢
2. Entity Framework DbContext 延遲加載、貪婪加載、顯性加載
                    
                </p>
            </a>
        </div>
    </div>

    <div class="level is-mobile continue-reading">
        <div class="level-left">
        </div>
        <div class="level-right">
            <a href="/posts/2014/10/entity-framework-%E7%AD%86%E8%A8%98/">Continue reading <i class="fa fa-angle-double-right"
                    aria-hidden="true"></i></a>
        </div>
    </div>
    <hr>
</div>





















        </div>
    </div>

<footer class="footer has-background-dark">
    <div class="content has-text-centered has-text-white">
        <p>
            © 2020 Ramium. Powered by
            <a class="has-text-light" href="https://github.com/gohugoio/hugo" target="_blank">
            Hugo</a>. Theme
            <a class="has-text-light" href="https://github.com/rafed123/ramium/" target="_blank">
                Ramium.
            </a>
        </p>
    </div>
</footer>
</body>

</html>