<!DOCTYPE html>
<html lang="en-us">

<head><title>
    TeamCity | 
    
    My New Hugo Site</title>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="description" content="A description for the meta tag of the site
    ">


<meta property="og:title" content="TeamCity" />
<meta property="og:description" content="A description for the meta tag of the site" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://example.org/tags/teamcity/" />
<meta property="og:updated_time" content="2014-09-29T17:37:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="TeamCity"/>
<meta name="twitter:description" content="A description for the meta tag of the site"/>

<meta itemprop="name" content="TeamCity">
<meta itemprop="description" content="A description for the meta tag of the site">

<link rel="canonical" href="http://example.org/tags/teamcity/" />

<link rel="icon" type="image/png" href="http://example.org/image/favicon.ico">

<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/bulma.min.css">





<script src=/js/ramium.js></script>
<link rel="stylesheet" href=/css/ramium.css>






<script data-ad-client="ca-pub-5338947003335320" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>

<body><nav class="navbar is-dark" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href=/>
      
      <strong>My New Hugo Site </strong>
      
    </a>

    <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false"
      data-target="navbarBasicExample">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div id="navbarBasicExample" class="navbar-menu">
    <div class="navbar-start">
      
      
      <a class="navbar-item" href="/">Home</a>
      
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">This Blog</a>
        <div class="navbar-dropdown">
          
          <a class="navbar-item" href="/tags/">All Tags</a>
          
          <a class="navbar-item" href="/sections/">All Sections</a>
          
          <a class="navbar-item" href="/posts/">All Posts</a>
          
        </div>
      </div>
      
      
    </div>

    <div class="navbar-end">
      
      <a class="navbar-item navgithub" href="https://github.com/rafed/ramium/" target="_blank">
        <i class="fa fa-github fa-2x"></i>
      </a>
      

      
    </div>
  </div>
</nav><div class="columns is-centered">
        <div id="page-body" class="column is-7">

<div class="content">
    <h1>TeamCity</h1>
</div>

<div class="blog-brief">
    <a href="/posts/2012/11/teamcity-%E6%94%B9%E7%94%A8%E7%B6%B2%E5%9F%9F%E5%B8%B3%E8%99%9Fldap%E7%99%BB%E5%85%A5/">
        <h3 class="title is-4">
            TeamCity 改用網域帳號LDAP登入
        </h3>
    </a>

    <div class="level is-mobile details">
        <div class="level-left">

            
            <div class="level-item">
                <a href="/posts/2012/11/teamcity-%E6%94%B9%E7%94%A8%E7%B6%B2%E5%9F%9F%E5%B8%B3%E8%99%9Fldap%E7%99%BB%E5%85%A5/">
                    <p class="subtitle info date">Nov 29, 2012
                    </p>
                </a>
            </div>
            


            <div class="level-item">
                <a href="/posts/2012/11/teamcity-%E6%94%B9%E7%94%A8%E7%B6%B2%E5%9F%9F%E5%B8%B3%E8%99%9Fldap%E7%99%BB%E5%85%A5/">
                    <p class="subtitle info">
                        3 mins read
                    </p>
                </a>
            </div>
        </div>
        <div class="level-right is-hidden-touch">
            
            <a class="tag is-rounded" href="/tags/ldap">LDAP</a>
            
            <a class="tag is-rounded" href="/tags/teamcity">TeamCity</a>
            
        </div>
    </div>

    <div>
        

        <div>
            <a href="/posts/2012/11/teamcity-%E6%94%B9%E7%94%A8%E7%B6%B2%E5%9F%9F%E5%B8%B3%E8%99%9Fldap%E7%99%BB%E5%85%A5/">
                <p class="summary">
                    如果開發環境中有網域管理的話，可以把登入模式改LDAP模組登入 打開C:\ProgramData\JetBrains\TeamCity\config\main-config.xml ](http://1.bp.blogspot.com/-LkzYbvwCZuw/ULdqGx9BwaI/AAAAAAAAAfQ/6CW0ZAsBGI8/s1600/01.MainConfig.png)
裡面的auth-type節點中，預設會是DefaultLoginModule &lt;login-module class=&#34;jetbrains.buildServer.serverSide.impl.auth.DefaultLoginModule&#34; /&gt; 將模組改成LDAPLoginModule就行了 &lt;login-module class=&#34;jetbrains.buildServer.serverSide.impl.auth.LDAPLoginModule&#34; /&gt; 再來是設定LDAP的環境參數，在config資料夾中，有一個ldap-config.properties.dist的範本檔 ](http://4.bp.blogspot.com/-WMSkZa1XkIk/ULdojCaepFI/AAAAAAAAAfI/vMVyOCm631c/s1600/ldapConfig.png)
複制成ldap-config.properties這個檔案，再用文字編輯器打開來修改，主要有以下幾個項目 把example換成自已的網域名稱 #設定AD的位置 java.naming.provider.url=ldap://dc.example.com:389/DC=example,DC=com #設定登入的時後，帳號格式不用包含\或是@ teamcity.auth.loginFilter=[^/\\\\@]&#43; #配合上一個設定，和AD驗證的時後，送過去的帳號，前面自動補上網域名稱 teamcity.auth.formatDN=example\\$login$  設定這三個項目，其他改用預設值，就可以用網域驗證了 登入後如果要同步帳號資料，可以再多加以下幾個選項  java.naming.security.principal=&lt;username&gt; java.naming.security.credentials=&lt;password&gt; teamcity.users.username=sAMAccountName teamcity.options.users.synchronize=true teamcity.users.filter=(objectClass=user) teamcity.users.property.displayName=displayName teamcity.users.property.email=mail 第一次登入的時後，會需要設定帳號成管理員 ](http://4.bp.blogspot.com/-YeLe1Eu1ow8/ULdoiVM37FI/AAAAAAAAAfA/wpXiVMbloMI/s1600/01.LDAP.png)
如果有問題，可以查一下log ](http://4.bp.blogspot.com/-msOoL42fhGg/ULdri4HdINI/AAAAAAAAAfY/njs3tVOcjv8/s1600/02.log.png)
參考資料  Typical LDAP Configurations LDAP Integration How To Set Up Secure LDAP Authentication with TeamCity  
                    
                </p>
            </a>
        </div>
    </div>

    <div class="level is-mobile continue-reading">
        <div class="level-left">
        </div>
        <div class="level-right">
            <a href="/posts/2012/11/teamcity-%E6%94%B9%E7%94%A8%E7%B6%B2%E5%9F%9F%E5%B8%B3%E8%99%9Fldap%E7%99%BB%E5%85%A5/">Continue reading <i class="fa fa-angle-double-right"
                    aria-hidden="true"></i></a>
        </div>
    </div>
    <hr>
</div><div class="blog-brief">
    <a href="/posts/2012/11/teamcity-%E5%BB%BA%E7%BD%AE%E5%BE%8C%E6%89%93%E5%8C%85%E5%92%8C%E7%99%BC%E4%BD%88%E5%A5%97%E4%BB%B6/">
        <h3 class="title is-4">
            TeamCity 建置後打包和發佈套件
        </h3>
    </a>

    <div class="level is-mobile details">
        <div class="level-left">

            
            <div class="level-item">
                <a href="/posts/2012/11/teamcity-%E5%BB%BA%E7%BD%AE%E5%BE%8C%E6%89%93%E5%8C%85%E5%92%8C%E7%99%BC%E4%BD%88%E5%A5%97%E4%BB%B6/">
                    <p class="subtitle info date">Nov 13, 2012
                    </p>
                </a>
            </div>
            


            <div class="level-item">
                <a href="/posts/2012/11/teamcity-%E5%BB%BA%E7%BD%AE%E5%BE%8C%E6%89%93%E5%8C%85%E5%92%8C%E7%99%BC%E4%BD%88%E5%A5%97%E4%BB%B6/">
                    <p class="subtitle info">
                        1 min read
                    </p>
                </a>
            </div>
        </div>
        <div class="level-right is-hidden-touch">
            
            <a class="tag is-rounded" href="/tags/nuget">NuGet</a>
            
            <a class="tag is-rounded" href="/tags/teamcity">TeamCity</a>
            
        </div>
    </div>

    <div>
        

        <div>
            <a href="/posts/2012/11/teamcity-%E5%BB%BA%E7%BD%AE%E5%BE%8C%E6%89%93%E5%8C%85%E5%92%8C%E7%99%BC%E4%BD%88%E5%A5%97%E4%BB%B6/">
                <p class="summary">
                    前言 接下來按照打包的方式來作業，新增一個Build Step為NuGetPack 選擇NuGet執行檔的版本，再選擇專案檔的路徑 Version是建置時後的版本，最後是輸出的資料夾 ](http://1.bp.blogspot.com/-Pyj4DdHcPGQ/UKJg1gT5ksI/AAAAAAAAAdI/iXtQOOhP51c/s1600/01.NugetPack.png)
因為增加了套件輸出的路徑，所以回到General Settings 在Artifact paths也增加套件輸出的路徑 ](http://1.bp.blogspot.com/-QxFU1xxqx04/UKJhPtSoFqI/AAAAAAAAAdQ/9s6gOq3iZfM/s1600/02.ArtifactPaths.png)
設定完成後再次建置，建置成功就會在Artifacts得到套件 ](http://3.bp.blogspot.com/-u8ub2aXW8pc/UKJhQFcK60I/AAAAAAAAAdY/GulIFxNyNPE/s1600/03.BuildSuccess.png)
接下來再新增一個Build Step，選擇NuGetPublish 選擇NuGet執行檔的版本，輸入NuGet Server的網址和api key 再選擇要上傳的套件，下次建置的時後，就會一起發佈出去了 ](http://2.bp.blogspot.com/-Axp5HdttthA/UKJhQ3jst5I/AAAAAAAAAdg/hrhTgMC4uzU/s1600/04.Publish.png)
                    
                </p>
            </a>
        </div>
    </div>

    <div class="level is-mobile continue-reading">
        <div class="level-left">
        </div>
        <div class="level-right">
            <a href="/posts/2012/11/teamcity-%E5%BB%BA%E7%BD%AE%E5%BE%8C%E6%89%93%E5%8C%85%E5%92%8C%E7%99%BC%E4%BD%88%E5%A5%97%E4%BB%B6/">Continue reading <i class="fa fa-angle-double-right"
                    aria-hidden="true"></i></a>
        </div>
    </div>
    <hr>
</div><div class="blog-brief">
    <a href="/posts/2012/11/teamcity-%E5%BB%BA%E7%BD%AE%E5%89%8D%E5%85%88%E9%82%84%E5%8E%9Fnuget%E5%A5%97%E4%BB%B6/">
        <h3 class="title is-4">
            TeamCity 建置前先還原NuGet套件
        </h3>
    </a>

    <div class="level is-mobile details">
        <div class="level-left">

            
            <div class="level-item">
                <a href="/posts/2012/11/teamcity-%E5%BB%BA%E7%BD%AE%E5%89%8D%E5%85%88%E9%82%84%E5%8E%9Fnuget%E5%A5%97%E4%BB%B6/">
                    <p class="subtitle info date">Nov 13, 2012
                    </p>
                </a>
            </div>
            


            <div class="level-item">
                <a href="/posts/2012/11/teamcity-%E5%BB%BA%E7%BD%AE%E5%89%8D%E5%85%88%E9%82%84%E5%8E%9Fnuget%E5%A5%97%E4%BB%B6/">
                    <p class="subtitle info">
                        2 mins read
                    </p>
                </a>
            </div>
        </div>
        <div class="level-right is-hidden-touch">
            
            <a class="tag is-rounded" href="/tags/nuget">NuGet</a>
            
            <a class="tag is-rounded" href="/tags/teamcity">TeamCity</a>
            
        </div>
    </div>

    <div>
        

        <div>
            <a href="/posts/2012/11/teamcity-%E5%BB%BA%E7%BD%AE%E5%89%8D%E5%85%88%E9%82%84%E5%8E%9Fnuget%E5%A5%97%E4%BB%B6/">
                <p class="summary">
                    當專案開始使用NuGet來管理套件時，預設套件會安裝在方案檔所在目錄的packages資料夾下 ](http://1.bp.blogspot.com/-Fb-XAssHj4w/UKJTn5RDetI/AAAAAAAAAbc/0mO3150CpWQ/s1600/01.Packages.png)
一般不會把這個套件這個資料夾加入原始檔控制以節省空間，而會在Vistual Studio中啟用套件還原 在方案檔上按右鍵就會看到這個選項了 ](http://1.bp.blogspot.com/-dyZVt873N58/UKJTobl3ClI/AAAAAAAAAbk/NhajJ3Li0bg/s1600/02.PackageRestore.png)
按下後會有一個提示訊息，主要是會新增一個方案資料夾的提示 ](http://2.bp.blogspot.com/-6K_7ZRaH-U0/UKJTo96X_eI/AAAAAAAAAbs/F67Lyeec0TM/s1600/03.AlertMsg.png)
按下是(Y)之前，就會多出一個.nuget的方案資料夾 ](http://4.bp.blogspot.com/-y91qsRmScLI/UKJTpo9UQUI/AAAAAAAAAb0/6o_pDPgV6-A/s1600/04.NuGetDir.png)
還要允許NuGet在建置期間下載遺漏的套件 ](http://1.bp.blogspot.com/-HcrmcbS0_2c/UKJTqBojMQI/AAAAAAAAAb8/twadrgujphw/s1600/05.AllowDownload.png)
把.nuget這個方案資料夾加入Source Control ](http://4.bp.blogspot.com/-rGNsuEcMug8/UKJTqeyIARI/AAAAAAAAAcE/X_gwllNs14o/s1600/06.NuGetSVNDir.png)
先在TeamCity中安裝NuGet Command Line工具 ](http://2.bp.blogspot.com/-D5zrJvyfRKE/UKJTq18pInI/AAAAAAAAAcM/ikPaGWFbePw/s1600/07.AddNuGetExe.png)
新增一個Build Step，選擇NuGet Installer 選擇NuGet的版本，和輸入NuGet的來源 如果使用的套件是從NuGet官網來的，那直接保持空白 如果會使用其他來源的套件，就要在此輸入網址 再輸入方案檔的相對路徑就行了 ](http://1.bp.blogspot.com/--zcz92kuTII/UKJTrZfOVWI/AAAAAAAAAcU/VjDyBdBpBLU/s1600/08.PreInstall.png)
再來要把NuGet Install這個動作，放到編譯之前 所以按一下Reorder build steps，然後用拖曳的方式調整步驟後按Apply ](http://2.bp.blogspot.com/-3BcMkxmRzyc/UKJTsEam9hI/AAAAAAAAAcc/Uj9RBGmTYP8/s1600/09.ReOrderStep.png)
再次建置就成功了 ](http://3.bp.blogspot.com/-hTTzcZcJpos/UKJTtmr7FLI/AAAAAAAAAck/MQKYRgqxUJ0/s1600/10.BuildSuccess.png)
                    
                </p>
            </a>
        </div>
    </div>

    <div class="level is-mobile continue-reading">
        <div class="level-left">
        </div>
        <div class="level-right">
            <a href="/posts/2012/11/teamcity-%E5%BB%BA%E7%BD%AE%E5%89%8D%E5%85%88%E9%82%84%E5%8E%9Fnuget%E5%A5%97%E4%BB%B6/">Continue reading <i class="fa fa-angle-double-right"
                    aria-hidden="true"></i></a>
        </div>
    </div>
    <hr>
</div><div class="blog-brief">
    <a href="/posts/2012/11/teamcity-%E8%A8%AD%E5%AE%9A%E5%B0%88%E6%A1%88/">
        <h3 class="title is-4">
            TeamCity 設定專案
        </h3>
    </a>

    <div class="level is-mobile details">
        <div class="level-left">

            
            <div class="level-item">
                <a href="/posts/2012/11/teamcity-%E8%A8%AD%E5%AE%9A%E5%B0%88%E6%A1%88/">
                    <p class="subtitle info date">Nov 13, 2012
                    </p>
                </a>
            </div>
            


            <div class="level-item">
                <a href="/posts/2012/11/teamcity-%E8%A8%AD%E5%AE%9A%E5%B0%88%E6%A1%88/">
                    <p class="subtitle info">
                        5 mins read
                    </p>
                </a>
            </div>
        </div>
        <div class="level-right is-hidden-touch">
            
            <a class="tag is-rounded" href="/tags/teamcity">TeamCity</a>
            
        </div>
    </div>

    <div>
        

        <div>
            <a href="/posts/2012/11/teamcity-%E8%A8%AD%E5%AE%9A%E5%B0%88%E6%A1%88/">
                <p class="summary">
                    接下來開始設定專案，首先建立一個專案 ](http://2.bp.blogspot.com/-6Z--lc4grZs/UKI-cBf9wrI/AAAAAAAAAZQ/IxPCZASp194/s1600/01.DefaultPage.png)
輸入專案名稱和說明後，按下Create就行了 ](http://2.bp.blogspot.com/-RZqV75lOXLw/UKI-c1lNXgI/AAAAAAAAAZY/xBnae98EbRs/s1600/02.CreateProject.png)
接下來要開始設定Build Configuration，免費版只能建20個 ](http://3.bp.blogspot.com/-cgPFA7QHV_Q/UKI-dRMINHI/AAAAAAAAAZg/_HNZLVsbKBY/s1600/03.CreateProjectSuccess.png)
第一步是設定一個名稱，這裡以Release Build為例 Build number format是自動版號的格式，除了每次建置會自動加1之外 因為接下來的版本控制會以SVN為例，所以加入了SVN的版號%build.vcs.number% Artifact Paths是最後產出檔案的路徑，先指向到Publish這個資料夾下面的zip檔 ](http://1.bp.blogspot.com/-0VQnfAkDWuM/UKJkDkGNBPI/AAAAAAAAAeE/Z_y0L8qvUb4/s1600/04.GeneralSetting.png)
第二步是設定一個版本控制來取得原始碼 ](http://4.bp.blogspot.com/-UkgcJOZkncQ/UKI-emmKCZI/AAAAAAAAAZw/dr9l8W2sPHQ/s1600/05.AddSVN.png)
下拉選單中有大部份Source Control的類型，這邊以SVN為例子 主要就是輸入路徑和帳號密碼就行了 ](http://1.bp.blogspot.com/-jJ6LldtRrGY/UKI-fGKSBpI/AAAAAAAAAZ4/O2YI_fnIPE4/s1600/06.ConfigSVN.png)
Labeling Rules這邊設定的是從trunk分支到tags的動作，等下還會有更詳細的設定 Test Connection可以測試一下是否可以連線，沒問題的話就按下Save按鈕 ](http://2.bp.blogspot.com/-6GoA44nrcIU/UKI-f91HcEI/AAAAAAAAAaA/spum8XecZxc/s1600/07.LabelingRule.png)
完成了一個VCS root的設定，順便編輯一下Checkout Rules 最簡單的用法就是每次只取出trunk的內容，並當成根目錄，就不會取出trunk和branches的資料了 ](http://3.bp.blogspot.com/-lhIOzEPYwGo/UKI-gphZzGI/AAAAAAAAAaI/cLETpRhADCE/s1600/08.AddCheckOutRule.png)
接下來還有更詳細的設定 Clean all files before build是用來選擇是否在每次編譯之前都先清空svn的資料，重新下載 VCS Labeling mode是用來選擇，是否要在建置之後，來執行剛設定Labeling的動作 ](http://3.bp.blogspot.com/-QF04KvH5GD8/UKI-hhYbqxI/AAAAAAAAAaQ/QHHSjvDHF0U/s1600/09.AddCheckOutRuleOK.png)
Build Step是用來設定建置方式，這邊選擇用方案檔的方式來建置專案 因為用到了Package這個target來封裝專案，所以需要選擇專案檔而不是方案檔 希望建置後封裝的檔案可以產出在前面設定Artifact Paths的路徑中，所以額外設了一個參數 如果一開始選擇用MSBuild來建置的話，參數的設定會更靈活 ](http://4.bp.blogspot.com/-HrWNHxrJr4k/UKJkQJN45nI/AAAAAAAAAeM/HBtGCa28xhs/s1600/10.SlnSetting.png) 
到這裡已經設定好專案了，如果日後需要修改設定，可以直接按右邊的某一個步驟來調整 先按一下右上角的Run來跑跑看目前的設定正不正確，再按一下Build Configuration Home來看結果 ](http://1.bp.blogspot.com/-qC2tZAjzWIk/UKI-i2KJkpI/AAAAAAAAAag/kuJ0MGuRkK4/s1600/11.ConfigOK.png)
可以看到這個專案的編譯記錄，目前編譯的版本，和SVN的送交記錄等等訊息 ](http://4.bp.blogspot.com/-32zzSpUlyws/UKJkcEg2LQI/AAAAAAAAAeU/W2FsTKGR3bQ/s1600/12.Run.png) 
編譯成功，也正確產出檔案的話，在Artifacts會有檔案下載的連結 ](http://3.bp.blogspot.com/-pFj39zNIxV0/UKJkgEv6tRI/AAAAAAAAAec/Z_VC5mEObtQ/s1600/13.Artifacts.png) 
參考資料  Continuous Integration &amp; Build Server – TeamCity (二) 設定專案 Continuous builds with TeamCity   
                    
                </p>
            </a>
        </div>
    </div>

    <div class="level is-mobile continue-reading">
        <div class="level-left">
        </div>
        <div class="level-right">
            <a href="/posts/2012/11/teamcity-%E8%A8%AD%E5%AE%9A%E5%B0%88%E6%A1%88/">Continue reading <i class="fa fa-angle-double-right"
                    aria-hidden="true"></i></a>
        </div>
    </div>
    <hr>
</div><div class="blog-brief">
    <a href="/posts/2012/11/teamcity-migrate-to-sql-server/">
        <h3 class="title is-4">
            TeamCity Migrate to SQL Server
        </h3>
    </a>

    <div class="level is-mobile details">
        <div class="level-left">

            
            <div class="level-item">
                <a href="/posts/2012/11/teamcity-migrate-to-sql-server/">
                    <p class="subtitle info date">Nov 8, 2012
                    </p>
                </a>
            </div>
            


            <div class="level-item">
                <a href="/posts/2012/11/teamcity-migrate-to-sql-server/">
                    <p class="subtitle info">
                        5 mins read
                    </p>
                </a>
            </div>
        </div>
        <div class="level-right is-hidden-touch">
            
            <a class="tag is-rounded" href="/tags/build-server">Build Server</a>
            
            <a class="tag is-rounded" href="/tags/migrate">Migrate</a>
            
            <a class="tag is-rounded" href="/tags/sql-server">SQL Server</a>
            
            <a class="tag is-rounded" href="/tags/teamcity">TeamCity</a>
            
        </div>
    </div>

    <div>
        

        <div>
            <a href="/posts/2012/11/teamcity-migrate-to-sql-server/">
                <p class="summary">
                    首先淮備好資料庫，例如一個名稱為TeamCity的DB ](http://2.bp.blogspot.com/-vkJGa93mgS8/UJud6ZDutdI/AAAAAAAAAXA/efJdpGCptNE/s1600/01.NewDB.png)
建一個登入帳號，這裡帳號用bar，密碼用foo當範例 ](http://1.bp.blogspot.com/-WRh2WZcEgNM/UJud7G_MGSI/AAAAAAAAAXI/hipvEg4ZmNY/s1600/02.NewUser.png)
給予db_owner的權限 ](http://3.bp.blogspot.com/-1mkS-zvnKaw/UJud7voFGwI/AAAAAAAAAXQ/IbcM34MqW_g/s1600/03.Owner.png)
再來下載Database Driver，官網的文件中有介紹兩種Driver 但我試了半天都不行用，後來爬文找到更改連線字串的寫法就可以了 所以在這裡以Microsoft JDBC Driver來介紹 先去Microsoft Download Center 下載Driver ](http://1.bp.blogspot.com/-YNHb9XrRv9k/UJud8PN0l0I/AAAAAAAAAXY/-w8b5MtUqSk/s1600/04.Download.png)
下載後解壓縮，把sqljdbc4.jar複製到這個神秘的地方 ](http://3.bp.blogspot.com/-whQq072tXfw/UJud8vAsOII/AAAAAAAAAXg/QhDweQyvu08/s1600/05.LibDir.png)
再來編輯database.mssql.properties.dist這一個範本檔 ](http://1.bp.blogspot.com/-8eIjxlciydI/UJud9RDp2bI/AAAAAAAAAXo/LzrW7FDwNZA/s1600/06.DatabaseTemplate.png)
官網的文件是把帳密打在後面，但試了半天就是不行 爬文的結果把帳密改寫在連線字串中就成功了，JAVA真是一種神秘的語言 ](http://2.bp.blogspot.com/-k2IyAF5GUFk/UJud91XM0HI/AAAAAAAAAXw/l4Jxv5E89a8/s1600/07.Config.png)
TeamCity升級到7.1.2後，JDBC的設定不能用了，只好再試了一下另一種連線方式jtds-1.2.2 首先到此下載，jTDS - SQL Server and Sybase JDBC driver 我下載最新的版本，會有java.lang.UnsupportedClassVersionError的錯誤，換成1.2.2就好了 一樣把jtds-1.2.2.jar複製到lib/jdbc的資料夾 連線字串就可以照著範本的格式打了
connectionUrl=jdbc:jtds:sqlserver://&lt;hostname&gt;:1433/&lt;dbname&gt; connectionProperties.user=&lt;username&gt; connectionProperties.password=&lt;password&gt; 參考資料  Migrating to an External Database  到此淮備工作就完成了，要開始轉移資料之前，要先把服務停下來 ](http://1.bp.blogspot.com/-ZO21PE08jw8/UJud-TBJl6I/AAAAAAAAAX4/3I9MMVD7KMw/s1600/08.StopService.png)
然後打開一個cmd，輸入以下指令 set path=%path%;c:\TeamCity\jre\bin 這行是和設定JAVA_HOME這個神秘的全域變數同樣的效果 用來把Java Run Time的路徑包含進系統的path 因為我沒安裝JAVA環境，所以要指向到TeamCity自帶的jre路徑 但如果在執行過程中會發生無法開啟jvm.cfg這個錯誤訊息的話 把System32下面的Java.exe、Javaw.exe、Javaws.exe都砍掉就行了
maintainDB.cmd migrate -T c:\ProgramData\JetBrains\TeamCity\config\database.mssql.properties.dist maintainDB.cmd是TeamCity自帶的資料庫維護工具，可以用來備份、還原、和搬移資料 這邊用的是migrate，把剛設定資料庫的設定檔用-T參考傳進去就行了 ](http://3.bp.blogspot.com/-6skME4p2u5U/UJud-95UhjI/AAAAAAAAAYA/L0Lezi6GN14/s1600/09.Cmd.png)
順利的話，就會開始搬移資料進SQL Server，並且也會把剛剛的資料庫連線範本 複制成正式用的檔案database.properties ](http://3.bp.blogspot.com/-Y76ZKXqUFmY/UJumBkLtVVI/AAAAAAAAAYw/56KfkQqXhIQ/s1600/10.Success.png)
                    
                </p>
            </a>
        </div>
    </div>

    <div class="level is-mobile continue-reading">
        <div class="level-left">
        </div>
        <div class="level-right">
            <a href="/posts/2012/11/teamcity-migrate-to-sql-server/">Continue reading <i class="fa fa-angle-double-right"
                    aria-hidden="true"></i></a>
        </div>
    </div>
    <hr>
</div><div class="blog-brief">
    <a href="/posts/2012/11/%E5%AE%89%E8%A3%9Dcontinuous-integration-ci-server-teamcity/">
        <h3 class="title is-4">
            安裝continuous Integration (CI) Server:TeamCity
        </h3>
    </a>

    <div class="level is-mobile details">
        <div class="level-left">

            
            <div class="level-item">
                <a href="/posts/2012/11/%E5%AE%89%E8%A3%9Dcontinuous-integration-ci-server-teamcity/">
                    <p class="subtitle info date">Nov 7, 2012
                    </p>
                </a>
            </div>
            


            <div class="level-item">
                <a href="/posts/2012/11/%E5%AE%89%E8%A3%9Dcontinuous-integration-ci-server-teamcity/">
                    <p class="subtitle info">
                        2 mins read
                    </p>
                </a>
            </div>
        </div>
        <div class="level-right is-hidden-touch">
            
            <a class="tag is-rounded" href="/tags/build-server">Build Server</a>
            
            <a class="tag is-rounded" href="/tags/teamcity">TeamCity</a>
            
        </div>
    </div>

    <div>
        

        <div>
            <a href="/posts/2012/11/%E5%AE%89%E8%A3%9Dcontinuous-integration-ci-server-teamcity/">
                <p class="summary">
                    首先到TeamCity的官網下載合適平台的安裝檔，這裡以Windows平台為例 ](http://2.bp.blogspot.com/-AXLFKiOYCwo/UJpLk6nWQEI/AAAAAAAAAUI/Pq6nhLyFBmo/s1600/01.Download.png)
接下來一直按下一步就行了 ](http://4.bp.blogspot.com/-bIHMy3RoffA/UJpLlYIgjwI/AAAAAAAAAUQ/qYC73ihpSTc/s1600/02.Install.png)
安裝的路徑 ](http://4.bp.blogspot.com/--R9vNZrd0c4/UJpQ16_40uI/AAAAAAAAAWY/Od-LiFqEP-U/s1600/03.InstallPath.png)
安裝的項目，可單獨選擇Build Agent或Server ](http://3.bp.blogspot.com/-PXWB1fViYNo/UJpPYyre8vI/AAAAAAAAAWI/YJJCEISpev8/s1600/04.InstallItem.png)
設定檔的路徑 ](http://1.bp.blogspot.com/-xclD7A4hI5s/UJpPZahympI/AAAAAAAAAWQ/CVvhaGMYtts/s1600/05.AppPath.png)
如果安裝的機器上面已經有Web伺服器的話，預設的Port就會改用8080 ](http://1.bp.blogspot.com/-hGBViNi4gSA/UJpLmB-UDII/AAAAAAAAAUY/0isL_frK7Uw/s1600/03.Port.png)
設定BuildAgent的環境，基本上會自動偵測，記住網域，按下Save就行了 ](http://2.bp.blogspot.com/-whsaUg0yWpY/UJpRYUAHXfI/AAAAAAAAAWg/Vu7tsT0mzSk/s1600/07.Config.png)
選擇TeamCity Server Service要用的帳號 ](http://3.bp.blogspot.com/-zjQfaovl5qs/UJpLnMGHDNI/AAAAAAAAAUo/irM35PeE5fs/s1600/05.Account.png)
選擇TeamCity Agent Service要用的帳號 ](http://3.bp.blogspot.com/-oNK5Kj7vcuY/UJpLn2N21UI/AAAAAAAAAUw/HEisyuMEwII/s1600/06.AgentAccount.png)
啟動服務 ](http://1.bp.blogspot.com/-jepVzX5K58E/UJpLojQtS0I/AAAAAAAAAU4/U9C7b4ee1co/s1600/07.StartService.png)
到此安裝完成，按下Finish開始設定頁面 ](http://1.bp.blogspot.com/-HtFXZHUHMQ8/UJpLpZd5AvI/AAAAAAAAAVA/G6P77ikRea0/s1600/08.ConfigOK.png)
第一次執行時的頁面，按下Proceed按鈕執行初始化動作 ](http://4.bp.blogspot.com/-g3yN6FR9TjE/UJpLp9Ow6RI/AAAAAAAAAVI/RBxGhby_zSE/s1600/09.FirstStart.png)
等待初始化完成後，會跳出使用者授權頁面 ](http://2.bp.blogspot.com/-L5ByFtFy_Y4/UJpLquKDRfI/AAAAAAAAAVQ/5DI2jjLBMy4/s1600/10.Authority.png)
輸入一組管理用的帳號 ](http://3.bp.blogspot.com/-Ayhsa_UAN48/UJpLrb1JDoI/AAAAAAAAAVY/Nl-NBuv3UlY/s1600/11.AdminAccount.png)
登入成功，接下來就可以開始來設定專案了 ](http://3.bp.blogspot.com/-MkG9bg7OfcM/UJpLrzh3SDI/AAAAAAAAAVg/XVqnth93x3s/s1600/12.InstallOK.png)
參考資料  TeamCity Edition Comparison Matrix  
                    
                </p>
            </a>
        </div>
    </div>

    <div class="level is-mobile continue-reading">
        <div class="level-left">
        </div>
        <div class="level-right">
            <a href="/posts/2012/11/%E5%AE%89%E8%A3%9Dcontinuous-integration-ci-server-teamcity/">Continue reading <i class="fa fa-angle-double-right"
                    aria-hidden="true"></i></a>
        </div>
    </div>
    <hr>
</div>





















        </div>
    </div>

<footer class="footer has-background-dark">
    <div class="content has-text-centered has-text-white">
        <p>
            © 2020 Ramium. Powered by
            <a class="has-text-light" href="https://github.com/gohugoio/hugo" target="_blank">
            Hugo</a>. Theme
            <a class="has-text-light" href="https://github.com/rafed123/ramium/" target="_blank">
                Ramium.
            </a>
        </p>
    </div>
</footer>
</body>

</html>